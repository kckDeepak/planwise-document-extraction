{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "description": "Employer-Sponsored Scheme (ESS) pension data extraction schema",
  "properties": {
    "general_info": {
      "type": "object",
      "description": "General scheme and provider information",
      "properties": {
        "provider": {
          "type": "string",
          "description": "Name of the pension provider or scheme administrator"
        },
        "contactNumberAndEmail": {
          "type": "string",
          "description": "Contact telephone number and email address for the provider"
        },
        "planNumber": {
          "type": "string",
          "description": "Unique plan or policy number identifier"
        },
        "planType": {
          "type": "string",
          "description": "Type of pension plan (e.g., Group Personal Pension, SIPP, Workplace Pension)"
        },
        "startDate": {
          "type": "string",
          "description": "Date when the pension plan started or was established (DD/MM/YYYY)"
        },
        "retirementDateAge": {
          "type": "string",
          "description": "Planned retirement date or age for the pension plan"
        },
        "employerName": {
          "type": "string",
          "description": "Name of the employer sponsoring the scheme"
        }
      }
    },
    "fund_values": {
      "type": "object",
      "description": "Current fund and transfer values",
      "properties": {
        "currentValueDate": {
          "type": "string",
          "description": "Current value of the pension plan and the date of valuation"
        },
        "transferValueDate": {
          "type": "string",
          "description": "Transfer value amount and the date of the transfer value quote"
        },
        "deathValueIfDiff": {
          "type": "string",
          "description": "Death benefit value if different from the transfer value"
        }
      }
    },
    "fund_holdings": {
      "type": "array",
      "description": "Current fund holdings - ONLY extract funds the client is invested in with their values",
      "items": {
        "type": "object",
        "properties": {
          "fundName": {
            "type": "string",
            "description": "Name of the fund held in the policy"
          },
          "fundValue": {
            "type": "string",
            "description": "Current value of the fund in GBP"
          },
          "allocation": {
            "type": "string",
            "description": "Allocation percentage"
          },
          "units": {
            "type": "string",
            "description": "Number of units held"
          },
          "unitPrice": {
            "type": "string",
            "description": "Unit price in GBP"
          }
        }
      }
    },
    "charges": {
      "type": "object",
      "description": "Scheme charges and fees",
      "properties": {
        "annualManagementCharge": {
          "type": "string",
          "description": "Annual Management Charge (AMC) percentage"
        },
        "totalExpenseRatio": {
          "type": "string",
          "description": "Total Expense Ratio (TER) percentage"
        },
        "platformCharge": {
          "type": "string",
          "description": "Platform or wrapper charge"
        },
        "adviserCharge": {
          "type": "string",
          "description": "Adviser charge details"
        },
        "policyFee": {
          "type": "string",
          "description": "Policy fee amount"
        },
        "exitCharge": {
          "type": "string",
          "description": "Exit charge or early withdrawal penalty"
        },
        "otherCharges": {
          "type": "string",
          "description": "Any other charges or fees"
        }
      }
    },
    "fund_charges": {
      "type": "array",
      "description": "Fund-specific charges table - extract charges for each invested fund",
      "items": {
        "type": "object",
        "properties": {
          "fundName": {
            "type": "string",
            "description": "Fund name"
          },
          "amc": {
            "type": "string",
            "description": "Annual Management Charge percentage"
          },
          "furtherCosts": {
            "type": "string",
            "description": "Further Costs percentage"
          },
          "totalCharge": {
            "type": "string",
            "description": "Total yearly charge percentage"
          }
        },
        "required": [
          "fundName",
          "totalCharge"
        ]
      }
    },
    "contributions": {
      "type": "object",
      "description": "Current contribution details",
      "properties": {
        "employeeContribution": {
          "type": "string",
          "description": "Employee contribution amount or percentage"
        },
        "employerContribution": {
          "type": "string",
          "description": "Employer contribution amount or percentage"
        },
        "totalContribution": {
          "type": "string",
          "description": "Total combined contribution"
        },
        "contributionFrequency": {
          "type": "string",
          "description": "Frequency of contributions (e.g., Monthly, Annual)"
        },
        "lastContributionDate": {
          "type": "string",
          "description": "Date of last contribution (DD/MM/YYYY)"
        }
      }
    },
    "contribution_history": {
      "type": "array",
      "description": "Extract ALL contributions from inception to current date - every contribution made to this policy",
      "items": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "description": "Date of contribution"
          },
          "amount": {
            "type": "string",
            "description": "Contribution amount"
          },
          "type": {
            "type": "string",
            "description": "Type (Employee/Employer/Transfer)"
          }
        }
      }
    },
    "flexibility_and_withdrawals": {
      "type": "object",
      "description": "Withdrawal and flexibility options",
      "properties": {
        "flexiAccessDrawdown": {
          "type": "string",
          "description": "Whether Flexible Access Drawdown is available (Yes/No)"
        },
        "ufplsAvailable": {
          "type": "string",
          "description": "Whether UFPLS withdrawals are available (Yes/No)"
        },
        "partialTransferPossible": {
          "type": "string",
          "description": "Whether partial transfers are possible (Yes/No)"
        },
        "minimumAmountToLeave": {
          "type": "string",
          "description": "Minimum amount that must be left behind for partial transfers"
        }
      }
    },
    "guarantees_and_protections": {
      "type": "object",
      "description": "Guarantees and protections",
      "properties": {
        "guaranteedAnnuityRate": {
          "type": "string",
          "description": "Guaranteed Annuity Rate (GAR) details or Yes/No"
        },
        "guaranteedMinimumPension": {
          "type": "string",
          "description": "Guaranteed Minimum Pension (GMP) details or Yes/No"
        },
        "protectedTaxFreeCash": {
          "type": "string",
          "description": "Protected Tax Free Cash (PTFC) - Yes/No"
        },
        "protectedRetirementAge": {
          "type": "string",
          "description": "Whether retirement age is protected (Yes/No)"
        },
        "otherGuarantees": {
          "type": "string",
          "description": "Any other guarantees or protections"
        }
      }
    },
    "benefits": {
      "type": "object",
      "description": "Additional benefits",
      "properties": {
        "deathBenefits": {
          "type": "string",
          "description": "Death benefits available"
        },
        "lifeCover": {
          "type": "string",
          "description": "Life cover details and cost"
        },
        "waiverOfContribution": {
          "type": "string",
          "description": "Waiver of contribution benefit details"
        },
        "dependantsBenefits": {
          "type": "string",
          "description": "Benefits available for dependants"
        }
      }
    },
    "investment_options": {
      "type": "object",
      "description": "Investment and fund options",
      "properties": {
        "numberOfFundsAvailable": {
          "type": "string",
          "description": "Total number of funds available"
        },
        "defaultFund": {
          "type": "string",
          "description": "Default fund for the scheme"
        },
        "lifestylingAvailable": {
          "type": "string",
          "description": "Whether lifestyling strategy is available (Yes/No)"
        },
        "switchingAllowed": {
          "type": "string",
          "description": "Whether fund switching is allowed (Yes/No)"
        },
        "switchingFrequency": {
          "type": "string",
          "description": "How often switches can be made"
        }
      }
    },
    "scheme_membership": {
      "type": "object",
      "description": "Scheme membership details",
      "properties": {
        "membershipStartDate": {
          "type": "string",
          "description": "Date member joined the scheme (DD/MM/YYYY)"
        },
        "yearsOfService": {
          "type": "string",
          "description": "Total years of service in the scheme"
        },
        "activeOrDeferred": {
          "type": "string",
          "description": "Whether membership is active or deferred"
        },
        "normalRetirementAge": {
          "type": "string",
          "description": "Normal retirement age for the scheme"
        }
      }
    },
    "defined_benefit_info": {
      "type": "object",
      "description": "Defined Benefit scheme specific information (if applicable)",
      "properties": {
        "accrualRate": {
          "type": "string",
          "description": "Pension accrual rate (e.g., 1/60th, 1/80th)"
        },
        "pensionableEarnings": {
          "type": "string",
          "description": "Current pensionable earnings"
        },
        "projectedAnnualPension": {
          "type": "string",
          "description": "Projected annual pension at retirement"
        },
        "revaluationMethod": {
          "type": "string",
          "description": "Method for revaluing benefits"
        },
        "indexationRate": {
          "type": "string",
          "description": "Rate at which pension increases"
        }
      }
    },
    "transfer_conditions": {
      "type": "object",
      "description": "Transfer conditions and requirements",
      "properties": {
        "transfersAllowed": {
          "type": "string",
          "description": "Whether transfers out are allowed (Yes/No)"
        },
        "transferPenalties": {
          "type": "string",
          "description": "Any penalties for transferring out"
        },
        "transferTimeframe": {
          "type": "string",
          "description": "Timeframe for processing transfers"
        },
        "partialTransferAllowed": {
          "type": "string",
          "description": "Whether partial transfers are allowed (Yes/No)"
        }
      }
    },
    "regulatory_info": {
      "type": "object",
      "description": "Regulatory and compliance information",
      "properties": {
        "schemeRegistrationNumber": {
          "type": "string",
          "description": "Pension scheme registration number"
        },
        "regulatorName": {
          "type": "string",
          "description": "Regulatory body overseeing the scheme"
        },
        "trusteeDetails": {
          "type": "string",
          "description": "Trustee information"
        },
        "schemeFundingLevel": {
          "type": "string",
          "description": "Funding level of the scheme (for DB schemes)"
        }
      }
    },
    "document_info": {
      "type": "object",
      "description": "Document and provider information",
      "properties": {
        "documentId": {
          "type": "string",
          "description": "Unique identifier for the document"
        },
        "documentDate": {
          "type": "string",
          "description": "Date of the document (DD/MM/YYYY)"
        },
        "documentType": {
          "type": "string",
          "description": "Type of document (e.g., Annual Statement, Transfer Quote)"
        },
        "companyName": {
          "type": "string",
          "description": "Legal name of the company/provider"
        },
        "registeredOffice": {
          "type": "string",
          "description": "Registered office address"
        },
        "companyRegistrationNumber": {
          "type": "string",
          "description": "Company registration number"
        }
      }
    },
    "notes": {
      "type": "string",
      "description": "Additional notes or comments about the scheme"
    }
  }
}